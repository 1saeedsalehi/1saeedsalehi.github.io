---
layout: post
title:  آموزش نصب مک بر روی Virtual Box
categories:
  - Software-Engineering
tags:
  - VirtalBox 
  - MacOS
  - MacOS Mojave
  - Virtualization

last_modified_at: 2018-10-03T14:25:52-05:00
---

پیرو مطالب آموزشی وب سایت در رابطه با توسعه برنامه‌های Cross Platform توسط Xamarin  که میتوانید [در این قسمت](https://www.dotnettips.info/search?term=bit-framework) آن‌ها را ببینید، نیاز به نصب سیستم عامل مک برای توسعه  اپلیکیشن‌های مخصوص iDevice‌ها داریم. از آنجا که سخت افزار‌های اپل فوق العاده گران می‌باشند، تهیه آن برای یادگیری این پلتفرم مقرون به صرفه نیست. لذا سعی کردم آموزش کاملی از نصب این سیستم عامل را بر روی مجازی ساز‌ها و کامپیوتر واقعی تهیه کنم و در اختیار دوستان قرار دهم تا بتوانند نیاز خود برای دسترسی به این سیستم عامل را مرتفع کنند.

روش‌های مختلفی برای این کار وجود دارند:

*   استفاده از شبیه ساز‌ها مانند Virtual Box یا VMWare  
    
*   استفاده از نسخه دستکاری شده که بتوانید بر روی سیستم سخت افزاری خود نصب کنید  
    

   

**مرحله اول : Virtual Box چیست؟**  

  

VirtualBox، نرم افزاری برای شبیه سازی ماشین‌های سخت افزاری است که می‌توانید بر روی آن سیستم عامل‌های مختلفی را نصب کنید که توسط سیستم عامل فعلی شما کنترل می‌شوند. ما از واژه‌ی سیستم عامل «میهمان» برای سیستم عامل مجازی و از سیستم عامل «میزبان» برای سیستم جاری خود استفاده خواهیم کرد. در اینجا امکان کنترل منابع سیستم عامل میهمان به راحتی وجود خواهد داشت.

برای نصب این نرم افزار، آن را از این [لینک](https://www.virtualbox.org/wiki/Downloads) از سایت سازنده، دریافت کنید.  
    

**مرحله دوم : ایمیج سیستم عامل مک**

ما برای نصب سیستم عامل بر روی ماشین مجازی چند گزینه خواهیم داشت.  برای یافتن آخرین نسخه سیستم عامل مک این [لینک](https://en.wikipedia.org/wiki/MacOS_version_history) می تواند راهنمای خوبی باشد.

*   استفاده از فایل ISO همانند ویندوز
*   استفاده از فایل VMDK آماده
*   ایجاد ایمیج از روی فایل DMG

  

_فایل ISO سیستم عامل_

استفاده از فایل ISO در واقع همانند نصب سایر سیستم عامل‌ها می‌باشد. نیاز است تا فایل ISO مربوط به سیستم عامل را دانلود کرده و از آن به عنوان نصاب استفاده کنید. دقت داشته باشید که فایل ISO به تنهایی و با تبدیل فایل DMG به ISO قابل استفاده نخواهد بود. زیرا بوت لودر این سیستم عامل با سیستم عامل‌های مرسوم مانند لینوکس و ویندوز متفاوت می‌باشد. برای پیدا کردن فایل ISO آخرین نسخه سیستم عامل میتوانید عبارتی مشابه با "Mac OS  iso download" را در گوگل جستجو کنید و یا سایتی مانند [این](https://www.sysnettechsolutions.com/en/macos/download-macos-mojave-10-14-iso/) میتواند گزینه خوبی برای دریافت این فایل باشد.

   

_فایل VMDK _

این فایل در واقع فایل هارد دیسک مربوط به مجازی ساز می‌باشد. نکته جالب این نوع فایل‌ها این است به صورت استاندارد میتوانند بین مجازی ساز‌های مختلف مانند VMWare Workstation نیز قابل اشتراک گذاری باشند.

برای سهولت در یافتن این فایل، من آخرین نسخه سیستم عامل مک را که در زمان نگارش این مطلب 10.14 با نام Mojave می‌باشد، بر روی اکانت گوگل درایو خودم آپلود کردم که میتوانید آن را در اینجا پیدا کنید:

[لینک دریافت آخرین نسخه سیستم عامل به صورت VMDK (حجم 6 گیگابایت)](https://drive.google.com/file/d/1arQrF5eWhcD0PYZpPj4-Y6-zO3tw3DV1/view?usp=sharing)   

فایل VMDK در واقع یک هارد دیسک شامل نسخه نصب شده و آماده استفاده سیستم عامل می‌باشد. در واقع راحت‌ترین و ساده‌ترین روش استفاده از این نوع فایل‌ها است که ما هم در این مقاله از آن استفاده خواهیم کرد.

    

_ایجاد ایمیج از روی فایل DMG _  

در این روش نیاز به یک سیستم عامل مک دارید که توسط آن بتوانید ایمیج مربوطه را بسازید. از آن جایی که احتمالا  خوانندگان این مطلب دسترسی به سیستم عامل مک را ندارند، در حال حاضر از توضیحات اضافی پرهیز میکنیم.

در آینده پیرو این مطالب سایر روش‌ها را نیز به صورت کامل توضیح خواهم داد.   

    

**مرحله سوم: ایجاد ماشین مجازی**

پس از دریافت فایل، آن را از حالت فشرده خارج میکنیم.

نرم افزار VirtualBox را که قبلا دانلود کرده‌ایم باز میکنیم. بالای نرم افزار بر روی گزینه New کلیک کرده، یک ویزارد نمایش داده خواهد شد که به ما کمک میکند یک ماشین مجازی جدید را بسازیم.

[![](/assets/images/virtualbox-mac-os-1.jpg)](/assets/images/virtualbox-mac-os-1.jpg "Click here to enlarge (opens new window)")

در مراحل مختلف، سوالات متعددی برای آماده سازی ماشین مجازی از شما پرسیده خواهد شد. نام آن را Mac قرار دهید. از کادر انتخابی Type، گزینه Mac OS را انتخاب کرده و نسخه 10.13 High Sierra را انتخاب کنید.  

در صفحه بعدی شما میزان RAM ای را که به سیستم عامل میهمان اختصاص میدهید، باید مشخص کنید. حداقل 4 گیگابایت رم به سیستم عامل میهمان اختصاص دهید. دقت داشته باشید که میزان آن 50 الی 65 درصد از کل رم سیستم تان باشد.

در مرحله بعدی شما باید تنظیمات مربوط به هارد دیسک را انجام دهید. گزینه “use an existing virtual hard disk file”  را انتخاب کنید. سپس فایلی را که در مرحله قبلی با پسوند VMDK دانلود کرده‌اید، انتخاب کنید.

نهایتا بر روی Finish کلیک کنید تا ماشین میهمان ساخته شود.

    

**مرحله چهارم: ویرایش تنظیمات مربوط به ماشین مجازی**

  

ماشین مجازی را که در مرحله قبلی ایجاد کرده‌اید، باز کنید و بر روی دکمه‌ی Setting کلیک کنید. در دسته بندی System بر روی تب Motherboard  کلیک کنید. گزینه انتخابی Enable EFI را فعال کنید و Chipset را به IHC9 و یا PIIX3 تغییر دهید.

[![](/assets/images/virtualbox-mac-os-2.jpg)](/assets/images/virtualbox-mac-os-2.jpg "Click here to enlarge (opens new window)")

  

در تب Processor  گزینه Enable PAE/NX را فعال کرده و Core‌ها را به نصف Core‌های سیستم فعلی خود ارتقاء دهید.

[![](/assets/images/virtualbox-mac-os-3.jpg)](/assets/images/virtualbox-mac-os-3.jpg "Click here to enlarge (opens new window)")

  

در دسته Display، گزینه Video Memory را به 128 مگابایت ارتقا دهید.

شما میتوانید سایر گزینه‌ها را نیز بسته به نیاز خود تغییر دهید.

[![](/assets/images/virtualbox-mac-os-4.jpg](/assets/images/virtualbox-mac-os-4.jpg "Click here to enlarge (opens new window)")

  

بر روی تب Storage کلیک کرده و گزینه Use Host I/O Cache را فعال کنید.

  

    

**مرحله پنجم: استفاده از خط فرمان برای اضافه کردن دستورات خاص**

خط فرمان (CMD) را به عنوان Administrator باز کنید.

دستورات زیر را وارد کنید. **دقت داشته باشید که بجای Your VM Name؛ نام ماشین مجازی خود را وارد کنید؛ در مثال ما Mac**


```
    cd "C:\Program Files\Oracle\VirtualBox\"
    VBoxManage.exe modifyvm "Your VM Name" --cpuidset 00000001 000106e5 00100800 0098e3fd bfebfbff
    VBoxManage setextradata "Your VM Name" "VBoxInternal/Devices/efi/0/Config/DmiSystemProduct" "iMac11,3"
    VBoxManage setextradata "Your VM Name" "VBoxInternal/Devices/efi/0/Config/DmiSystemVersion" "1.0"
    VBoxManage setextradata "Your VM Name" "VBoxInternal/Devices/efi/0/Config/DmiBoardProduct" "Iloveapple"
    VBoxManage setextradata "Your VM Name" "VBoxInternal/Devices/smc/0/Config/DeviceKey" "ourhardworkbythesewordsguardedpleasedontsteal(c)AppleComputerInc"
    VBoxManage setextradata "Your VM Name" "VBoxInternal/Devices/smc/0/Config/GetKeyFromRealSMC" 1
```

VirtualBox را قبل از اجزای این دستورات ببندید و سپس این دستورات را اجرا کنید.

    

**مرحله ششم: اجرای سیستم عامل مک نسخه 10.14 بر روی Virtual Box**

ماشین مجازی را که ایجاد کرده اید، باز کنید و بر روی start کلیک کنید:

[![](/assets/images/virtualbox-mac-os-5.jpg)](/assets/images/virtualbox-mac-os-5.jpg "Click here to enlarge (opens new window)")

  

صفحه فوق را باید مشاهده کنید. در صورت بروز هر گونه مشکلی، سوال خود را ذیل این مطلب مطرح کنید.

تنظیمات اولیه و نام کاربری سیستم عامل را وارد کنید و تمام!

     

دقت داشته باشید که استفاده از این روش ممکن است با تجربه کاری یک مک بر روی سخت افزار اصلی به کلی متفاوت باشد. ما از این روش برای جبران محدودیت خود برای توسعه استفاده میکنیم.  

خوشبختانه برای کار با Xamarin.iOS شما مجبور به کد نویسی بر روی مک نخواهید بود و تنها پروسه بیلد پروژه بر روی آن انجام خواهد شد. لذا مشکلات کارآیی آن بر روی روند کار شما تاثیر چندانی نخواهد داشت. البته برای نصب این سیستم عامل به صورت مجازی توصیه می‌شود از هارد SSD استفاده کنید.